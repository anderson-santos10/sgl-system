{% extends 'base.html' %}
{% load static %}

{% block title %}Dados do Transporte{% endblock %}

{% block content %}

<div class="container mt-4">

  <!-- DASHBOARD -->
  <section class="stats-wrapper">

    <!-- GRID PRINCIPAL -->
    <section class="stats-grid">

      <!-- CARD: DADOS LOGÍSTICOS -->
      <article class="stats-card">

        <header class="stats-header">
          <h5 class="stats-title">Dados Transporte</h5>
          <div class="stats-main">
            #{{ lecom.pk }}
          </div>
        </header>

        <!-- IDENTIFICAÇÃO -->
        <div class="stats-row stats-highlight">
          <span class="stats-label">Lecom</span>
          <span class="stats-value">{{ lecom.lecom }}</span>
        </div>

        <!-- LISTA DE DADOS -->
        <div class="stats-list">

          <div class="stats-row">
            <span class="stats-label">Peso</span>
            <span class="stats-value">{{ lecom.peso }} kg</span>
          </div>

          <div class="stats-row">
            <span class="stats-label">Destino</span>
            <span class="stats-value">{{ lecom.destino }}</span>
          </div>

          <div class="stats-row">
            <span class="stats-label">Data</span>
            <span class="stats-value">{{ lecom.data|date:"d/m/Y" }}</span>
          </div>

          <div class="stats-row">
            <span class="stats-label">Veículo</span>
            <span class="stats-value">
              {{ lecom.veiculo.tipo_veiculo|default:"Não informado" }}
            </span>
          </div>

          <div class="stats-row">
            <span class="stats-label">M³</span>
            <span class="stats-value">{{ lecom.m3 }}</span>
          </div>

          <div class="stats-row">
            <span class="stats-label">Total de Cargas</span>
            <span class="stats-value">{{ cargas|length }}</span>
          </div>

          <div class="stats-row">
            <span class="stats-label">Observação</span>
            <span class="stats-value">
              {{ lecom.observacao|default:"—" }}
            </span>
          </div>

        </div>

      </article>

    </section>

    <!-- RESUMO -->
    <section class="stats-summary">
      <h5 class="section-title">Resumo</h5>

      <div class="row g-3">
        {% for carga in cargas %}
          <div class="col-md-3">
            <article class="carga-card">
              <p><strong>SEQ:</strong> {{ carga.seq }}</p>
              <p><strong>Carga:</strong> {{ carga.carga }}</p>
              <p><strong>Entregas:</strong> {{ carga.total_entregas }}</p>
              <p><strong>MOD:</strong> {{ carga.mod }}</p>
            </article>
          </div>
        {% empty %}
          <div class="col-12 text-muted">
            Nenhuma carga vinculada.
          </div>
        {% endfor %}
      </div>
    </section>

    <!-- AÇÃO -->
    <section class="stats-actions">
      <form method="post" class="text-end mt-4">
        {% csrf_token %}
        <button type="submit" class="btn btn-save">
          Salvar Separação
        </button>
      </form>
    </section>

  </section>

</div>
<link rel="stylesheet" href="{% static 'css/expedicao/detalhe_carga.css' %}">

{% endblock %}
